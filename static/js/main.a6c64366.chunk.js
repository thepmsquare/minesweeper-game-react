(this["webpackJsonpminesweeper-react"]=this["webpackJsonpminesweeper-react"]||[]).push([[0],{160:function(t,e,c){t.exports=c(283)},165:function(t,e,c){},167:function(t,e,c){},282:function(t,e,c){},283:function(t,e,c){"use strict";c.r(e);var n=c(0),i=c.n(n),a=c(30),o=c.n(a),s=(c(165),c(166),c(68)),l=c(74),r=c(72),u=c(50),d=c(291),p=c(290),h=c(289),g=(c(167),function(t){Object(l.a)(c,t);var e=Object(r.a)(c);function c(t){var n;return Object(s.a)(this,c),(n=e.call(this,t)).componentDidMount=function(){n.updateGrid()},n.componentDidUpdate=function(t,e){n.updateGrid(),t!==n.props&&n.setState({firstClickDone:!1,bombs:[],clicked:[],calculatedClues:[],rightClick:[],secondRightClick:[],lose:!1,win:!1}),t===n.props&&n.state.clicked.forEach((function(t){n.checkForZero(t)}))},n.updateGrid=function(){var t=window.getComputedStyle(document.querySelector(".Minesweeper-tilesContainer")).getPropertyValue("width").slice(0,-2);document.querySelector(".Minesweeper-tilesContainer").style.gridTemplateColumns="repeat(".concat(n.props.columns,",").concat(t/n.props.columns,"px)"),document.querySelector(".Minesweeper-tilesContainer").style.gridTemplateRows="repeat(".concat(n.props.rows,",").concat(t/n.props.columns,"px)")},n.handleTileClick=function(t){t.persist();var e=t.target.getAttribute("row")+"-"+t.target.getAttribute("column");if(!n.state.rightClick.includes(e)&&!n.state.secondRightClick.includes(e)){var c=Object(u.a)(n.state.clicked);c.includes(e)||c.push(e),n.setState({clicked:c},(function(){if(n.state.firstClickDone){var c=n.state.calculatedClues.map((function(t){return t.position})).filter((function(t){return!n.state.bombs.includes(t)})).sort(),i=n.state.clicked.sort();n.state.bombs.includes(e)?n.setState({lose:!0,clicked:n.state.calculatedClues.map((function(t){return t.position})),rightClick:[],secondRightClick:[]}):JSON.stringify(c)===JSON.stringify(i)?n.setState({win:!0,rightClick:n.state.bombs,secondRightClick:[]}):n.checkForZero(t)}else n.handleFirstClick(t,e)}))}},n.handleFirstClick=function(t,e){for(var c=[],i=parseInt(t.target.getAttribute("row")),a=parseInt(t.target.getAttribute("column")),o="".concat(i-1,"-").concat(a-1),s="".concat(i-1,"-").concat(a),l="".concat(i-1,"-").concat(a+1),r="".concat(i,"-").concat(a-1),u="".concat(i,"-").concat(a+1),d="".concat(i+1,"-").concat(a-1),p="".concat(i+1,"-").concat(a),h="".concat(i+1,"-").concat(a+1),g=1;g<=n.props.rows;g++)for(var k=1;k<=n.props.columns;k++)g+"-"+k!==e&&g+"-"+k!==o&&g+"-"+k!==s&&g+"-"+k!==l&&g+"-"+k!==r&&g+"-"+k!==u&&g+"-"+k!==d&&g+"-"+k!==p&&g+"-"+k!==h&&c.push(g+"-"+k);for(var C=[];C.length<n.props.bombs;){var f=[Math.floor(Math.random()*c.length)];C.push(c[f]),c.splice(f,1)}n.setState({firstClickDone:!0,bombs:C},(function(){n.calculateClues(t)}))},n.calculateClues=function(t){for(var e=[],c=1;c<=n.props.rows;c++)for(var i=1;i<=n.props.columns;i++)e.push([c,i]);for(var a=[],o=0;o<e.length;o++){var s=0;n.state.bombs.includes(e[o].join("-"))?s=-1:(n.state.bombs.includes("".concat(e[o][0]-1,"-").concat(e[o][1]-1))&&(s+=1),n.state.bombs.includes("".concat(e[o][0]-1,"-").concat(e[o][1]))&&(s+=1),n.state.bombs.includes("".concat(e[o][0]-1,"-").concat(e[o][1]+1))&&(s+=1),n.state.bombs.includes("".concat(e[o][0],"-").concat(e[o][1]-1))&&(s+=1),n.state.bombs.includes("".concat(e[o][0],"-").concat(e[o][1]+1))&&(s+=1),n.state.bombs.includes("".concat(e[o][0]+1,"-").concat(e[o][1]-1))&&(s+=1),n.state.bombs.includes("".concat(e[o][0]+1,"-").concat(e[o][1]))&&(s+=1),n.state.bombs.includes("".concat(e[o][0]+1,"-").concat(e[o][1]+1))&&(s+=1)),a.push({position:e[o].join("-"),clue:s})}n.setState({calculatedClues:a},(function(){n.checkForZero(t)}))},n.checkForZero=function(t){if("object"===typeof t){if(0===n.state.calculatedClues[t.target.getAttribute("index")].clue){var e=parseInt(t.target.getAttribute("row")),c=parseInt(t.target.getAttribute("column"));n.clickNeighbours(e,c)}}else if("string"===typeof t&&n.state.calculatedClues.find((function(e){return e.position===t}))&&0===n.state.calculatedClues.find((function(e){return e.position===t})).clue){var i=parseInt(t.split("-")[0]),a=parseInt(t.split("-")[1]);n.clickNeighbours(i,a)}},n.clickNeighbours=function(t,e){var c=Object(u.a)(n.state.clicked);!c.includes("".concat(t-1,"-").concat(e-1))&&t-1>0&&t-1<=n.props.rows&&e-1>0&&e-1<=n.props.columns&&(c.push("".concat(t-1,"-").concat(e-1)),n.state.rightClick.includes("".concat(t-1,"-").concat(e-1))&&n.state.rightClick.splice(n.state.rightClick.indexOf("".concat(t-1,"-").concat(e-1)),1),n.state.secondRightClick.includes("".concat(t-1,"-").concat(e-1))&&n.state.secondRightClick.splice(n.state.secondRightClick.indexOf("".concat(t-1,"-").concat(e-1)),1)),!c.includes("".concat(t-1,"-").concat(e))&&t-1>0&&t-1<=n.props.rows&&e>0&&e<=n.props.columns&&(c.push("".concat(t-1,"-").concat(e)),n.state.rightClick.includes("".concat(t-1,"-").concat(e))&&n.state.rightClick.splice(n.state.rightClick.indexOf("".concat(t-1,"-").concat(e)),1),n.state.secondRightClick.includes("".concat(t-1,"-").concat(e))&&n.state.secondRightClick.splice(n.state.secondRightClick.indexOf("".concat(t-1,"-").concat(e)),1)),!c.includes("".concat(t-1,"-").concat(e+1))&&t-1>0&&t-1<=n.props.rows&&e+1>0&&e+1<=n.props.columns&&(c.push("".concat(t-1,"-").concat(e+1)),n.state.rightClick.includes("".concat(t-1,"-").concat(e+1))&&n.state.rightClick.splice(n.state.rightClick.indexOf("".concat(t-1,"-").concat(e+1)),1),n.state.secondRightClick.includes("".concat(t-1,"-").concat(e+1))&&n.state.secondRightClick.splice(n.state.secondRightClick.indexOf("".concat(t-1,"-").concat(e+1)),1)),!c.includes("".concat(t,"-").concat(e-1))&&t>0&&t<=n.props.rows&&e-1>0&&e-1<=n.props.columns&&(c.push("".concat(t,"-").concat(e-1)),n.state.rightClick.includes("".concat(t,"-").concat(e-1))&&n.state.rightClick.splice(n.state.rightClick.indexOf("".concat(t,"-").concat(e-1)),1),n.state.secondRightClick.includes("".concat(t,"-").concat(e-1))&&n.state.secondRightClick.splice(n.state.secondRightClick.indexOf("".concat(t,"-").concat(e-1)),1)),!c.includes("".concat(t,"-").concat(e+1))&&t>0&&t<=n.props.rows&&e+1>0&&e+1<=n.props.columns&&(c.push("".concat(t,"-").concat(e+1)),n.state.rightClick.includes("".concat(t,"-").concat(e+1))&&n.state.rightClick.splice(n.state.rightClick.indexOf("".concat(t,"-").concat(e+1)),1),n.state.secondRightClick.includes("".concat(t,"-").concat(e+1))&&n.state.secondRightClick.splice(n.state.secondRightClick.indexOf("".concat(t,"-").concat(e+1)),1)),!c.includes("".concat(t+1,"-").concat(e-1))&&t+1>0&&t+1<=n.props.rows&&e-1>0&&e-1<=n.props.columns&&(c.push("".concat(t+1,"-").concat(e-1)),n.state.rightClick.includes("".concat(t+1,"-").concat(e-1))&&n.state.rightClick.splice(n.state.rightClick.indexOf("".concat(t+1,"-").concat(e-1)),1),n.state.secondRightClick.includes("".concat(t+1,"-").concat(e-1))&&n.state.secondRightClick.splice(n.state.secondRightClick.indexOf("".concat(t+1,"-").concat(e-1)),1)),!c.includes("".concat(t+1,"-").concat(e))&&t+1>0&&t+1<=n.props.rows&&e>0&&e<=n.props.columns&&(c.push("".concat(t+1,"-").concat(e)),n.state.rightClick.includes("".concat(t+1,"-").concat(e))&&n.state.rightClick.splice(n.state.rightClick.indexOf("".concat(t+1,"-").concat(e)),1),n.state.secondRightClick.includes("".concat(t+1,"-").concat(e))&&n.state.secondRightClick.splice(n.state.secondRightClick.indexOf("".concat(t+1,"-").concat(e)),1)),!c.includes("".concat(t+1,"-").concat(e+1))&&t+1>0&&t+1<=n.props.rows&&e+1>0&&e+1<=n.props.columns&&(c.push("".concat(t+1,"-").concat(e+1)),n.state.rightClick.includes("".concat(t+1,"-").concat(e+1))&&n.state.rightClick.splice(n.state.rightClick.indexOf("".concat(t+1,"-").concat(e+1)),1),n.state.secondRightClick.includes("".concat(t+1,"-").concat(e+1))&&n.state.secondRightClick.splice(n.state.secondRightClick.indexOf("".concat(t+1,"-").concat(e+1)),1)),n.state.clicked.length!==c.length&&n.setState((function(){return{clicked:c}}))},n.handleRightClick=function(t){if(t.preventDefault(),!n.state.win){var e=parseInt(t.target.getAttribute("row")),c=parseInt(t.target.getAttribute("column")),i="".concat(e,"-").concat(c),a=Object(u.a)(n.state.rightClick),o=Object(u.a)(n.state.secondRightClick);n.state.clicked.includes(i)||a.includes(i)||o.includes(i)?n.state.clicked.includes(i)||!a.includes(i)||o.includes(i)?n.state.clicked.includes(i)||a.includes(i)||!o.includes(i)||(o.splice(o.findIndex((function(t){return t===i})),1),n.setState({secondRightClick:o})):(a.splice(a.findIndex((function(t){return t===i})),1),o.push(i),n.setState({rightClick:a,secondRightClick:o})):(a.push(i),n.setState({rightClick:a}))}},n.handleRetry=function(){n.setState({firstClickDone:!1,bombs:[],clicked:[],calculatedClues:[],rightClick:[],secondRightClick:[],lose:!1,win:!1})},n.handleMessageDismiss=function(){n.setState({messageVisible:!1})},n.render=function(){window.onresize=n.updateGrid;for(var t=[],e=1;e<=n.props.rows;e++)for(var c=1;c<=n.props.columns;c++)t.push([e,c]);return i.a.createElement("div",{className:"Minesweeper"},n.state.messageVisible?i.a.createElement(d.a,{onDismiss:n.handleMessageDismiss,header:"Tip",content:"Long press / Right click to flag."}):"",i.a.createElement("div",{className:"Minesweeper-top"},i.a.createElement(p.a,null,n.state.lose||n.state.win?"":"".concat(parseInt(n.props.bombs)-n.state.rightClick.length," \ud83d\udca3"),n.state.lose?"You Lose":"",n.state.win?"Win":""),i.a.createElement(p.a,{onClick:n.handleRetry},"Retry"),i.a.createElement(h.a,{placeholder:"Difficulty",selection:!0,compact:!0,options:[{key:"easy",text:"Easy",value:"easy"},{key:"medium",text:"Medium",value:"medium"},{key:"hard",text:"Hard",value:"hard"}],defaultValue:"easy",onChange:n.props.dropdownOnChange})),i.a.createElement("div",{className:"Minesweeper-tilesContainer"},t.map((function(t,e){return i.a.createElement(p.a,{key:t.join("-"),row:t[0],column:t[1],index:e,basic:n.state.clicked.includes(t.join("-")),onClick:n.handleTileClick,onContextMenu:n.handleRightClick},n.state.clicked.includes(t.join("-"))&&n.state.calculatedClues[e]&&!n.state.rightClick.includes(t.join("-"))&&!n.state.secondRightClick.includes(t.join("-"))&&-1!==n.state.calculatedClues[e].clue?n.state.calculatedClues[e].clue:"",n.state.bombs.includes(t.join("-"))&&n.state.clicked.includes(t.join("-"))?"\ud83d\udca3":"",n.state.rightClick.includes(t.join("-"))?"\ud83d\udea9":"",n.state.secondRightClick.includes(t.join("-"))?"\u2753":"")}))))},n.state={firstClickDone:!1,bombs:[],clicked:[],calculatedClues:[],rightClick:[],secondRightClick:[],lose:!1,win:!1,messageVisible:!0},n}return c}(n.Component)),k=(c(282),function(t){Object(l.a)(c,t);var e=Object(r.a)(c);function c(t){var n;return Object(s.a)(this,c),(n=e.call(this,t)).handleItemClick=function(t,e){n.setState({activeItem:e.value})},n.render=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(g,{rows:"easy"===n.state.activeItem?9:"medium"===n.state.activeItem?16:30,columns:"easy"===n.state.activeItem?9:(n.state.activeItem,16),bombs:"easy"===n.state.activeItem?10:"medium"===n.state.activeItem?40:99,dropdownOnChange:n.handleItemClick}))},n.state={activeItem:"easy"},n}return c}(n.Component)),C=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function f(t,e){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var c=t.installing;null!=c&&(c.onstatechange=function(){"installed"===c.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(k,null)),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/minesweeper-game-react",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/minesweeper-game-react","/service-worker.js");C?(!function(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then((function(c){var n=c.headers.get("content-type");404===c.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):f(t,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):f(e,t)}))}}()}},[[160,1,2]]]);
//# sourceMappingURL=main.a6c64366.chunk.js.map